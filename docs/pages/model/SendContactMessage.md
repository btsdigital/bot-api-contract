---
title: SendContactMessage
sidebar: home_sidebar
keywords: SendContactMessage
permalink: SendContactMessage.html
toc: true
folder: Commands
---

![Commands](images/SendContactMessage.png "SendContactMessage")
<p>
<i>* Validation error text may vary depending on a source of an error</i>
</p>

## Description

<p> This method is for sending  message with a contact info. 
</p>

If a service specify value of localID variable, it would get [MessageIdAssigned](https://btsdigital.github.io/bot-api-contract/messageidassigned.html) update asynchronously.
<p> On succes empty response with http code 200 is returned.
</p>


## Endpoint

https://messapi.btsdapps.net/bot/v1/updates/

## Structure

| Variable  | Obligative  | Type| Validation| Description
|---|:---:|---|---|---|
| type | true | String | Must be filled with "SendContactMessage" value |Type of request "SendContactMessage" |
| localId | false |  String |LocalID length should be <= 255  | Message ID generated by Bot  |
| recipient  | true |  [Peer](https://btsdigital.github.io/bot-api-contract/peer.html) | For Peer type validation see type page| Peer to send this message to |
| inputMedia  | true |  [InputContact](https://btsdigital.github.io/bot-api-contract/inputcontact.html) | - | InputContact object containing contact info |

## Sample request

```
{  
   "commands":[  
      {  
         "type":"SendContactMessage",
         "localId":"54353",
         "recipient":{  
            "type":"GROUP",
            "id":"Uuid_value"
         },
         "inputMedia":{  
            "firstName":"Alexandr",
            "lastName":"",
            "phoneNumber":"7**********",
            "contactType":"InputUnregisteredContact"
         }
      }
   ]
}
```
## Updates

<p>This method may asynchronously return following updates:
</p>

[MessageIdAssigned](https://btsdigital.github.io/bot-api-contract/messageidassigned.html).


## Possible business exceptions

<i>Service to service dialog </i>
<p> Sending contact messages from service to service is not available, function is not supported.
</p>
<i>Service to user dialog</i>
<p>
<ul>
  <li> Sending contact message to a user who banned a service ( put a service into a black list) is not available;
  </li>
  <li> Sending contact message to a user is not available if a dialog wasn't found (deleted/ID error);
  </li>
  <li> Sending contact message to a user is not available if Peer type and Peer ID specified in request doesn't match;
  </li>
</ul>  
</p>
<i>Service to channel dialog</i>
<p>
<ul>
  <li> Sending contact message to a channel is not available if a channel wasn't found (deleted/ID error) or channel was banned;
  </li>
  <li>Sending contact message to a channel is not available if a service is not a channel subscriber and has no administrator/owner role assigned with permission to write;
  </li>
  </ul>
  </p>
<i>Service to group dialog</i>
<p>
Sending contact message to a group dialog is not available if a service is not a member of this group.
</p>
