---
title: SendContainerMessage
sidebar: home_sidebar
keywords: SendContainerMessage
permalink: SendContainerMessage.html
toc: true
folder: Commands
---

![Commands](images/SendContainerMessage.png "BotCommandSendContainerMessage")
<p>
<i>* Validation error text may vary depending on a source of an error</i>
</p>

## Desciprtion

<p> This method is for sending a message with a type container. In containers cards are sent. Card is an abstract object described in a json string. Card describes a complex graphical object written in a CSS Flexible Box Layout Module.
</p>
<p> If a service specify value of localID variable, it would get MessageIdAssigned update asynchroniously.
</p>
<p> On succes nothing  is returned, but an empty response stating 200 http status.
</p>

## Endpoint

https://messapi.btsdapps.net/bot/v1/updates/

## Structure

| Variable  | Obligative  | Type| Validation| Description
|---|:---:|---|---|---|
| type | true | String | Must be filled with "SendContainerMessage" value |Type of request "SendContainerMessage" |
| localId | false |  String |LocalID length should be <= 255  | Message ID generated by Bot  |
| recipient  | true |  Peer | For Peer type validation see type page| Peer to send this message to |
| content| true |  String |Size of containerMessage.Content should be <= 20000 symbols | Json array  |

## Sample request

```
{
  "commands": [
    {
      "type": "SendContainerMessage",
      "localId": "54353",
      "recipient": {
        "type": "GROUP",
        "id": "0fab26f9-f181-11e9-882c-f22cfe20c1ac"
      },
      "content":"[
        {
          \"type\": \"custom_container\",
          \"options\": {
            \"indent_outer\": {
              \"top\": 8,
              \"bottom\": 8
            },
            \"background\": \"border\"
          },
          \"content\": [
            {
              \"type\": \"custom_container\",
              \"options\": {
                \"flex_options\": {
                  \"flex_direction\": \"column\",
                  \"align_items\": \"start\"
                }
              },
              \"content\": [
                {
                  \"type\": \"image\",
                  \"file_metadata\": {
                    \"file_type\": \"image\",
                    \"file_id\": \"d3dabf08-628e-11e9-9c83-a6e4404dda13\",
                    \"filename\": \"2962290980\"
                  },
                  \"options\": {
                    \"width\": 62,
                    \"height\": 33
                  }
                },
                {
                  \"type\": \"custom_container\",
                  \"form_action\": {
                    \"action\": \"open_url\",
                    \"data_template\": \"https://common.container.ru\"
                  },
                  \"options\": {
                    \"width\": 62,
                    \"flex_options\": {
                      \"flex_direction\": \"row\",
                      \"justify_content\": \"between\"
                    }
                  },
                  "content\": [
                    {
                      \"type\": \"text\",
                      \"title\": \"ЖК «Багыстан»\",
                      \"form_action\": {
                        \"action\": "open_url",
                        \"data_template\": \"https://bagystan.ru\"
                      },
                      \"options\": {
                        \"text_size\": \"H3\",
                        \"text_style\": \"bold\",
                        \"flex_options\": {
                          \"align_self\": \"center\"
                        },
                        \"indent_outer\": {
                          "\left\": 16
                        }
                      }
                    },
                    {
                      \"type\": \"image\",
                      \"file_metadata\": {
                        \"file_type\": \"image\",
                        \"file_id\": \"670c4aa1-628f-11e9-b991-9ab80caa3f4c\",
                        \"filename\": \"4014567986\"
                      },
                      \"form_action\": {
                        \"action\": \"send_message\",
                        \"data_template\": \"lolka50\"
                      },
                      \"options\": {
                        \"width\": 17,
                        \"height\": 9,
                        \"indent_outer\": {
                          \"right\": 16
                        }
                      }
                    }
                  ]
                },
                {
                  \"type\": \"divider\",
                  \"options\": {
                    \"indent_outer\": {
                      \"left\": 16,
                      \"right\": 16
                    }
                  }
                },
                {
                  \"type\": \"custom_container\",
                  \"options\": {
                    \"width\": 62,
                    \"flex_options\": {
                      \"flex_direction\": \"row\"
                    },
                    \"indent_outer\": {
                      \"top\": 8,
                      \"bottom\": 12
                    }
                  },
                  \"content\": [
                    {
                      \"type\": \"text\",
                      \"title\": \"1-к квартира, 62 м²\",
                      \"options\": {
                        \"text_size\": \"H4\",
                        \"flex_options\": {
                          \"align_self\": \"center\",
                          \"flex_grow\": 1,
                          \"flex_basis\": 0
                        },
                        \"indent_outer\": {
                          \"left\": 16
                        }
                      }
                    },
                    {
                      \"type\": \"text\",
                      \"title\": \"9 170 100 Т\",
                      \"options\": {
                        \"text_size\": \"H3\",
                        \"text_style\": \"bold\",
                        \"flex_options\": {
                          "align_self\": \"center\",
                          \"flex_grow\": 1,
                          \"flex_basis\": 0
                        },
                        \"alignment": \"right\",
                        \"indent_outer\": {
                          \"right\": 16
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]"
    }
  ]
}
```

## Possible business exceptions

<i>Service to service dialog 
</i>
<p>Sending container messages from service to service is not available, function is not supported.
</p>
<i>Service to user dialog
</i>
<p>
<ul>
<li>Sending container message to a user who banned a service ( put a service into a black list) is not available);
</li>
<li>Service isn't able to send container message to a user if a dialog wasn't found (deleted/ID error);
</li>
<li> Sending a container message to a user is not available if Peer type and Peer ID specified in request doesn't match.
</li>
</ul>
</p>
<i>Service to channel dialog
</i>
<p>
<ul>
  <li> Sending container message to a channel is not available if a channel wasn't found (deleted/ID error) or channel was banned;
  </li>
  <li>Sending container message to a channel is not available if a service is not a channel subscriber and has no administrator/owner role assigned and WRITE permission assigned;
  </li>
</ul>
</p>
<i>Service to group dialog
</i>
<p>
Sending container message to a group dialog is not available if a service is not a member of this group.
</p>

